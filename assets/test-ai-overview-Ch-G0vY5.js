import{O as dt,g as ft,C as yt,o as n,j as G,$ as u,b as o,Z as W,c as z,a as E,n as X,P as xt,s as C,f as k,i as P,I as ht,d as Y,t as Q,V as j}from"./liko.es-Db3MpUbX.js";import"./index-CceWuvSs.js";async function gt(){const f=new dt;await f.init({width:1200,height:960,bgColor:2899536,container:"gameContainer",physics:{enabled:!0,debug:!1,boundaryArea:new ft(0,0,1200,950).pad(50)}});const e=new yt({width:1200,height:950,parent:f.stage});new n({label:"title",text:`Liko引擎功能展示
Liko Game Engine Features`,textColor:"#ecf0f1",fontSize:32,fontWeight:"bold",textAlign:"center",position:{x:600,y:40},anchor:{x:.5,y:.5},parent:e}),new n({text:"支持渐变色文本效果",textColor:G.createLinearGradient({startX:0,endX:250,startY:0,endY:0},[{offset:0,color:"#e74c3c"},{offset:.5,color:"#f39c12"},{offset:1,color:"#2ecc71"}]),fontSize:22,fontWeight:"bold",position:{x:50,y:120},parent:e});const y=new n;y.label="strokeText",y.text="描边文本效果",y.textColor="#3498db",y.fontSize=22,y.fontWeight="bold",y.textStrokeWidth=3,y.textStrokeColor="#ffffff",y.position.set(450,120),e.addChild(y);const _=new n({text:"运行时间: 0秒",fontSize:16,textColor:"red",parent:e,position:{x:650,y:125}}),tt=Date.now();f.stage.timer.setInterval(1,()=>{const t=Math.floor((Date.now()-tt)/1e3);_.text=`运行时间: ${t}秒`}),new n({text:"精灵系统与动画",textColor:"#f1c40f",fontSize:20,fontWeight:"bold",position:{x:50,y:180},parent:e}),new u({url:"assets/bg2.webp",width:150,height:100,alpha:.8,position:{x:50,y:210},parent:e});const a=new u;a.url="assets/apple.png",a.scale.set(.4),a.anchor={x:.5,y:.5},a.position.set(300,240),e.addChild(a),a.on(o.pointerOver,()=>{a.scale.set(.45),a.tintColor=16739179}),a.on(o.pointerOut,()=>{a.scale.set(.4),a.tintColor=16777215}),a.on(o.click,()=>{W.play("assets/sound/bullet.mp3",.5),z.to({target:a,props:{angle:"+360"},duration:.5}).play()});const q=new u({url:"assets/strawberry.png",scale:{x:.4,y:.4},anchor:{x:.5,y:.5},position:{x:450,y:240},parent:e});z.to({target:q,props:{angle:360},duration:3,repeat:0,onUpdate:t=>{q.angle=t*360}}).play();const et=new u({url:"assets/girl.png",width:56,height:78,anchor:{x:.5,y:.5},position:{x:600,y:240},parent:e});z.to({target:et,props:{position:{y:180}},duration:2,repeat:0,yoyo:!0}).play();const M=await E.load("assets/boy.png"),V=await E.load("assets/girl.png"),I=new u({texture:M,anchor:{x:.5,y:.5},position:{x:750,y:240},scale:{x:.8,y:.8},parent:e});I.on(o.click,async()=>{V&&M&&(I.texture=I.texture===M?V:M,z.to({target:I,props:{scale:{x:1,y:1}},duration:.2,yoyo:!0,repeat:2}).play())}),new n({text:"动画精灵(AnimatedSprite)系统",textColor:"#e67e22",fontSize:18,fontWeight:"bold",position:{x:50,y:320},parent:e}),new X({url:"assets/sheet/fliggy.atlas",parent:e,position:{x:50,y:380},scale:{x:.8,y:.8}}).play(),new X({url:"assets/sheet/zombie.atlas",parent:e,position:{x:180,y:350},scale:{x:.4,y:.4},frameRate:8}).play(),new X({url:"assets/sheet/fire-rotated.atlas",parent:e,position:{x:310,y:350},scale:{x:.6,y:.6},frameRate:15}).play();const L=await E.load("assets/sheet/girl-jump.atlas","sheet"),A=await E.load("assets/sheet/girl-run.atlas","sheet");if(A&&L){const t=new X({textures:A,parent:e,position:{x:440,y:350},scale:{x:.4,y:.4},frameRate:8});t.play(),t.on(o.click,()=>{t.textures!==L&&(t.textures=L,z.to({target:t,props:{position:{x:t.position.x,y:t.position.y-60}},ease:xt.CubicOut,duration:.4,yoyo:!0,repeat:2}).onAllComplete(()=>{t.textures=A}).play())})}new n({text:"拖动系统",textColor:"#e67e22",fontSize:20,fontWeight:"bold",position:{x:900,y:180},parent:e});const ot=new u({url:"assets/strawberry.png",width:50,height:50,anchor:{x:.5,y:.5},position:{x:950,y:250},parent:e}),it=new C({label:"draggableShape",drawRect:{x:0,y:0,width:50,height:50,fill:"#3498db",stroke:"#2980b9",strokeWidth:3},anchor:{x:.5,y:.5},position:{x:1050,y:250},parent:e}),nt=new u({url:"assets/apple.png",width:40,height:46,anchor:{x:.5,y:.5},position:{x:1e3,y:300},parent:e,scripts:[new k({rigidType:"dynamic",friction:.8,restitution:.3,allowRotation:!1})]});function B(t,b=!1){let d=!1;const g={x:0,y:0};let l=null;b&&(l=t.findScript({Class:k})),t.on(o.pointerDown,R=>{d=!0,g.x=R.pointer.x-t.position.x,g.y=R.pointer.y-t.position.y,t.scale.set(1.1),t.tintColor!==void 0&&(t.tintColor=16777113),l&&(l.rigidType="kinematic")}),f.stage.on(o.pointerMove,R=>{if(d){const ct=R.pointer.x-g.x,pt=R.pointer.y-g.y,K=Math.max(25,Math.min(1175,ct)),N=Math.max(25,Math.min(925,pt));l?l.setPosition(K,N):t.position.set(K,N)}}),f.stage.on(o.pointerUp,()=>{d&&(d=!1,t.scale.set(1),t.tintColor!==void 0&&(t.tintColor=16777215),l&&(l.rigidType="dynamic"))})}B(ot),B(it),B(nt,!0);const F=new u({url:"assets/box.png",width:50,height:50,anchor:{x:.5,y:.5},parent:e,position:{x:850,y:120},scripts:[new k({rigidType:"dynamic",friction:.7,restitution:.4,allowRotation:!0})]});F.on(o.click,()=>{const t=F.findScript({Class:k});t&&(t.applyForceToCenter({x:0,y:-800}),W.play("assets/sound/bullet.mp3",.7))});const x=new u;x.url="assets/ball.png",x.width=35,x.height=35,x.anchor={x:.5,y:.5},x.position.set(950,120),x.scripts=[new k({rigidType:"dynamic",friction:.3,restitution:.8,shapes:[{shapeType:"circle",radius:17.5}]})],e.addChild(x),x.on(o.click,()=>{const t=x.findScript({Class:k});t&&(t.linearVelocity={x:0,y:-15},W.play("assets/sound/bullet.mp3",.7))}),new n({text:"Canvas绘图系统",textColor:"#9b59b6",fontSize:20,fontWeight:"bold",position:{x:50,y:460},parent:e});const s=new P;s.beginPath(),s.circle(40,40,25),s.fill({color:"#e74c3c"}),s.beginPath(),s.rect(90,20,50,35),s.fill({color:"#3498db"}),s.beginPath(),s.moveTo(170,20),s.lineTo(210,20),s.lineTo(190,60),s.closePath(),s.fill({color:"#2ecc71"}),s.position.set(50,490),e.addChild(s);const c=new P;c.beginPath(),c.roundRect(10,10,70,50,8),c.stroke({color:"#9b59b6",width:3}),c.beginPath(),c.ellipse(130,35,35,20,0,2*Math.PI),c.stroke({color:"#f39c12",width:3}),c.beginPath(),c.circle(210,35,25),c.stroke({color:"#e74c3c",width:2,dash:[5,3]}),c.position.set(310,490),e.addChild(c);const i=new P;i.beginPath();const U=22,st=U*.382,at=35,rt=35;for(let t=0;t<10;t++){const b=Math.PI/5*t-Math.PI/2,d=t%2===0?U:st,g=at+d*Math.cos(b),l=rt+d*Math.sin(b);t===0?i.moveTo(g,l):i.lineTo(g,l)}i.closePath(),i.fill({color:"#f1c40f"}),i.stroke({color:"#e67e22",width:2}),i.beginPath(),i.moveTo(100,15),i.quadraticCurveTo(140,0,180,15),i.quadraticCurveTo(220,35,180,55),i.quadraticCurveTo(140,70,100,55),i.quadraticCurveTo(60,35,100,15),i.fill({color:"#3498db"}),i.position.set(570,490),e.addChild(i);const w=new P;w.beginPath(),w.rect(10,10,80,35),w.fill({color:G.createLinearGradient({startX:10,startY:10,endX:90,endY:10},[{offset:0,color:"#ff6b6b"},{offset:.5,color:"#4ecdc4"},{offset:1,color:"#ffffff"}])}),w.beginPath(),w.circle(130,30,25),w.fill({color:G.createRadialGradient({startX:130,startY:27,startRadius:0,endX:130,endY:27,endRadius:22},[{offset:0,color:"#ffffff"},{offset:.7,color:"#ff6b6b"},{offset:1,color:"#c44569"}])}),w.position.set(810,490),e.addChild(w);const Z=await ht.createFromUrl("assets/bg2.webp");if(!Z)return;const m=new P;m.clear(),m.beginPath(),m.circle(25,25,25).clip(),m.drawImage(Z,0,0,150,100),m.closePath(),m.position.set(990,490),f.stage.addChild(m);const h=new P,$=t=>{h.clear(),h.beginPath();for(let b=0;b<8;b++){const d=b*Math.PI/4,g=40+25*Math.cos(d),l=40+25*Math.sin(d);h.circle(g,l,12)}h.circle(40,40,18),h.fill({color:t})};$("#e74c3c"),h.on(o.pointerOver,()=>{$("#2ecc71")}),h.on(o.pointerOut,()=>{$("#e74c3c")}),h.position.set(1080,490),e.addChild(h),new n({text:"Shape几何图形系统",textColor:"#1abc9c",fontSize:20,fontWeight:"bold",position:{x:50,y:580},parent:e}),new C({label:"basicRect",drawRect:{x:0,y:0,width:50,height:50,fill:"#3498db",stroke:"#2980b9",strokeWidth:2},position:{x:50,y:620},parent:e}),new C({label:"basicCircle",drawCircle:{x:25,y:25,radius:25,fill:"#e74c3c",stroke:"#c0392b",strokeWidth:3},position:{x:140,y:620},parent:e}),new C({label:"roundedRect",drawRoundedRect:{x:0,y:0,width:60,height:40,cornerRadius:12,fill:"#2ecc71",stroke:"#27ae60",strokeWidth:2},position:{x:230,y:620},parent:e}),new C({label:"ellipse",drawEllipse:{x:35,y:25,radiusX:35,radiusY:20,fill:"#f39c12",stroke:"#e67e22",strokeWidth:2},position:{x:330,y:620},parent:e}),new C({label:"triangle",drawPolygon:{points:[{x:30,y:0},{x:60,y:50},{x:0,y:50}],fill:"#9b59b6",stroke:"#8e44ad",strokeWidth:2},position:{x:430,y:610},parent:e}),new C({label:"polyline",drawLine:{points:[{x:0,y:40},{x:20,y:0},{x:40,y:25},{x:60,y:10},{x:80,y:35}],color:"#34495e",lineWidth:4},position:{x:530,y:610},parent:e}),new C({label:"interactiveShape",position:{x:650,y:610},parent:e});const v=e.findChild({label:"interactiveShape"});v&&(v.drawCircle({x:25,y:25,radius:25,fill:"#1abc9c",stroke:"#16a085",strokeWidth:2}),v.on(o.pointerOver,()=>{v.drawCircle({x:25,y:25,radius:30,fill:"#e67e22",stroke:"#d35400",strokeWidth:3})}),v.on(o.pointerOut,()=>{v.drawCircle({x:25,y:25,radius:25,fill:"#1abc9c",stroke:"#16a085",strokeWidth:2})})),new n({text:"粒子系统(ParticleSystem)",textColor:"#e67e22",fontSize:20,fontWeight:"bold",position:{x:50,y:700},parent:e});const S=new Y({url:"assets/particle/fire.plist",parent:e,position:{x:120,y:750},autoPlay:!0}),O=new n({text:"⏸️ 暂停",fontSize:14,textColor:"#e74c3c",position:{x:180,y:750},parent:e});O.on(o.click,()=>{S.isPlaying&&!S.isPaused?(S.pause(),O.text="▶️ 播放"):S.isPaused?(S.resume(),O.text="⏸️ 暂停"):(S.play(),O.text="⏸️ 暂停"),W.play("assets/sound/bullet.mp3",.3)});const r=new Y({parent:e,position:{x:350,y:750},autoPlay:!0,config:{gravityX:0,gravityY:150,angle:270,angleVariance:15,startColor:{r:.3,g:.6,b:1,a:1},finishColor:{r:1,g:.3,b:.8,a:0},startParticleSize:8,finishParticleSize:12,emissionRate:50,particleLifespan:2,particleLifespanVariance:.5,speed:100}});let H=0;const J=[{start:{r:.2,g:.8,b:1,a:1},end:{r:1,g:.2,b:.8,a:0}},{start:{r:1,g:.3,b:.1,a:1},end:{r:1,g:.8,b:0,a:0}},{start:{r:.1,g:1,b:.3,a:1},end:{r:.8,g:1,b:.1,a:0}},{start:{r:.8,g:.2,b:1,a:1},end:{r:1,g:.6,b:.8,a:0}}];f.stage.timer.setInterval(3,()=>{const t=J[H%J.length];r.setStartColor(t.start),r.setEndColor(t.end),H++}),r.on(o.pointerOver,()=>{r.setAngle(90,30),r.setEmissionRate(80)}),r.on(o.pointerOut,()=>{r.setAngle(270,45),r.setEmissionRate(50)}),r.on(o.click,()=>{const t=new Y({parent:e,position:{x:r.position.x,y:r.position.y}});t.setStartColor({r:1,g:.8,b:0,a:1}),t.setEndColor({r:1,g:.2,b:0,a:0}),t.setParticleSize(15,5),t.setEmissionRate(200),t.setParticleLifespan(1),t.setAngle(0,360),t.play(),W.play("assets/sound/bullet.mp3",.8),setTimeout(()=>{t.stop(),e.removeChild(t)},1500)});const lt=new n({text:"粒子状态: 火焰: 0, 交互: 0, 鼠标: 0",textColor:"#95a5a6",fontSize:12,position:{x:400,y:750},parent:e});f.stage.timer.setInterval(2,()=>{lt.text=`粒子状态: 火焰: ${S.particleCount}, 交互: ${r.particleCount}, 鼠标: ${p.particleCount}`});const p=new Y({parent:e,position:{x:600,y:400},autoPlay:!0});p.setStartColor({r:.8,g:.2,b:.8,a:1}),p.setEndColor({r:.2,g:.8,b:.8,a:0}),p.setParticleSize(6,2),p.setEmissionRate(30),p.setParticleLifespan(1.5,.3),p.setGravity(0,20),p.setAngle(90,60),p.play(),f.stage.on(o.pointerMove,t=>{t.pointer&&p.position.set(t.pointer.x,t.pointer.y)});const T=new P;T.rect(0,0,1200,30),T.fill({color:"#34495e"}),T.position.set(0,920),e.addChild(T),T.addScript(new k({rigidType:"static",category:"ground"})),new n({text:"控制面板",textColor:"#ecf0f1",fontSize:18,fontWeight:"bold",position:{x:50,y:800},parent:e});const D=new n({text:"🎵 播放背景音乐",fontSize:16,textColor:"#f39c12",parent:e,position:{x:50,y:830}});D.on(o.click,()=>{Q.play("assets/sound/bg.mp3").fadeIn(2),D.text="🎵 音乐播放中..."}),new n({text:"⏹️ 停止音乐",fontSize:16,textColor:"#e74c3c",parent:e,position:{x:220,y:830}}).on(o.click,()=>{Q.stopAll(),D.text="🎵 播放背景音乐"}),document.addEventListener("keydown",t=>{switch(t.key){case" ":t.preventDefault(),j.system.paused?j.system.resume():j.system.pause();break}})}gt();
