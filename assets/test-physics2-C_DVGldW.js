import{O as T,C as S,o as g,f as r,i as y,$ as m}from"./liko.es-Db3MpUbX.js";import"./index-CceWuvSs.js";async function B(){const c=new T;await c.init({width:800,height:800,bgColor:3355443,physics:{enabled:!0,debug:!0}});const i=new S;i.width=800,i.height=800,c.stage.addChild(i);const n=new g;n.text="物理引擎测试",n.position.set(400,30),n.anchor.set(.5,.5),n.fontSize=24,n.textColor="#ffffff",i.addChild(n);const t=new g;t.text="点击按钮添加不同物体，点击场景施加力",t.position.set(400,60),t.anchor.set(.5,.5),t.fontSize=16,t.textColor="#cccccc",i.addChild(t),l(i,400,750,700,20,0),l(i,600,600,300,20,-15),l(i,200,600,300,20,15),l(i,50,400,20,600,0),l(i,750,400,20,600,0),l(i,400,400,200,20,0),p(i,"添加球",50,120,()=>{w(i,Math.random()*700+50,200)}),p(i,"添加方块",170,120,()=>{x(i,Math.random()*700+50,200)}),p(i,"添加多边形",290,120,()=>{b(i,Math.random()*700+50,200)}),p(i,"添加链条",410,120,()=>{v(i,200,300)}),p(i,"重力反转",530,120,()=>{const e=i.children.filter(s=>{const o=s.findScript({Class:r});return o&&o.rigidType==="dynamic"});for(const s of e){const o=s.findScript({Class:r});o&&(o.gravityScale=-o.gravityScale)}}),p(i,"清除物体",650,120,()=>{const e=i.children.filter(s=>{const o=s.findScript({Class:r});return o&&o.rigidType==="dynamic"});for(const s of e)s.destroy()}),i.on("click",e=>{const s={x:e.pointer.x,y:e.pointer.y},o=i.children.filter(d=>{const f=d.findScript({Class:r});return f&&f.rigidType==="dynamic"});for(const d of o){const f=d.findScript({Class:r});if(f){const u=d.position,a={x:u.x-s.x,y:u.y-s.y},h=Math.sqrt(a.x*a.x+a.y*a.y);if(h>0){const C={x:a.x/h*100,y:a.y/h*500};f.applyForceToCenter(C)}}}}),w(i,300,200),x(i,400,200),b(i,500,200)}function l(c,i,n,t,e,s){const o=new y;o.position.set(i,n),o.anchor.set(.5,.5),o.rect(0,0,t,e),o.angle=s,o.fill({color:"#8a8a8a"}),c.addChild(o);const d=new r({rigidType:"static",friction:.5,restitution:.2});o.addScript(d)}function w(c,i,n){const t=new m;t.url="assets/ball.png",t.position.set(i,n),t.width=40,t.height=40,c.addChild(t);const e=new r({rigidType:"dynamic",allowRotation:!0,friction:.5,restitution:.7,shapes:[{shapeType:"circle",radius:20}]});t.addScript(e)}function x(c,i,n){const t=new y;t.position.set(i,n),t.rect(0,0,40,40),t.fill({color:"#ff8800"}),c.addChild(t);const e=new r({rigidType:"dynamic",allowRotation:!0,friction:.3,restitution:.4,shapes:[{shapeType:"box",width:40,height:40}]});t.addScript(e)}function b(c,i,n){const t=new y;t.position.set(i,n),t.beginPath(),t.moveTo(0,-25),t.lineTo(25,25),t.lineTo(-25,25),t.closePath(),t.fill({color:"#00cc88"}),c.addChild(t);const e=new r({rigidType:"dynamic",allowRotation:!0,friction:.2,restitution:.5,shapes:[{shapeType:"polygon",vertices:[{x:0,y:-25},{x:25,y:25},{x:-25,y:25}]}]});t.addScript(e)}function v(c,i,n){const t=new y;t.position.set(i,n),t.beginPath(),t.moveTo(-100,0),t.lineTo(100,50),t.lineTo(200,40),t.stroke({color:"#ffffff",width:3}),c.addChild(t);const e=new r({rigidType:"static",shapes:[{shapeType:"chain",vertices:[{x:-100,y:0},{x:100,y:50},{x:200,y:40}]}]});t.addScript(e)}function p(c,i,n,t,e){const s=new g;s.position.set(n,t),s.text=i,s.fontSize=20,s.on("click",o=>{o.stopPropagation(),e()}),c.addChild(s)}B();
