import{$ as T,a as S,q as g,t as r,W as f,M as m}from"./liko.es-remNCA1z.js";import"./index-CumCSj91.js";async function B(){const c=new T;await c.init({width:800,height:800,bgColor:3355443,physics:{enabled:!0,debug:!0}});const o=new S;o.width=800,o.height=800,c.stage.addChild(o);const e=new g;e.text="物理引擎测试",e.pos.set(400,30),e.anchor.set(.5,.5),e.fontSize=24,e.textColor="#ffffff",o.addChild(e);const t=new g;t.text="点击按钮添加不同物体，点击场景施加力",t.pos.set(400,60),t.anchor.set(.5,.5),t.fontSize=16,t.textColor="#cccccc",o.addChild(t),l(o,400,750,700,20,0),l(o,600,600,300,20,-15),l(o,200,600,300,20,15),l(o,50,400,20,600,0),l(o,750,400,20,600,0),l(o,400,400,200,20,0),p(o,"添加球",50,120,()=>{w(o,Math.random()*700+50,200)}),p(o,"添加方块",170,120,()=>{x(o,Math.random()*700+50,200)}),p(o,"添加多边形",290,120,()=>{b(o,Math.random()*700+50,200)}),p(o,"添加链条",410,120,()=>{v(o,200,300)}),p(o,"重力反转",530,120,()=>{const n=o.children.filter(s=>{const i=s.findScript({Class:r});return i&&i.rigidType==="dynamic"});for(const s of n){const i=s.findScript({Class:r});i&&(i.gravityScale=-i.gravityScale)}}),p(o,"清除物体",650,120,()=>{const n=o.children.filter(s=>{const i=s.findScript({Class:r});return i&&i.rigidType==="dynamic"});for(const s of n)s.destroy()}),o.on("click",n=>{const s={x:n.pointer.x,y:n.pointer.y},i=o.children.filter(a=>{const y=a.findScript({Class:r});return y&&y.rigidType==="dynamic"});for(const a of i){const y=a.findScript({Class:r});if(y){const u=a.pos,d={x:u.x-s.x,y:u.y-s.y},h=Math.sqrt(d.x*d.x+d.y*d.y);if(h>0){const C={x:d.x/h*100,y:d.y/h*500};y.applyForceToCenter(C)}}}}),w(o,300,200),x(o,400,200),b(o,500,200)}function l(c,o,e,t,n,s){const i=new f;i.pos.set(o,e),i.anchor.set(.5,.5),i.rect(0,0,t,n),i.angle=s,i.fill({color:"#8a8a8a"}),c.addChild(i);const a=new r({rigidType:"static",friction:.5,restitution:.2});i.addScript(a)}function w(c,o,e){const t=new m;t.url="assets/ball.png",t.pos.set(o,e),t.width=40,t.height=40,c.addChild(t);const n=new r({rigidType:"dynamic",allowRotation:!0,friction:.5,restitution:.7,shapes:[{shapeType:"circle",radius:20}]});t.addScript(n)}function x(c,o,e){const t=new f;t.pos.set(o,e),t.rect(0,0,40,40),t.fill({color:"#ff8800"}),c.addChild(t);const n=new r({rigidType:"dynamic",allowRotation:!0,friction:.3,restitution:.4,shapes:[{shapeType:"box",width:40,height:40}]});t.addScript(n)}function b(c,o,e){const t=new f;t.pos.set(o,e),t.beginPath(),t.moveTo(0,-25),t.lineTo(25,25),t.lineTo(-25,25),t.closePath(),t.fill({color:"#00cc88"}),c.addChild(t);const n=new r({rigidType:"dynamic",allowRotation:!0,friction:.2,restitution:.5,shapes:[{shapeType:"polygon",vertices:[{x:0,y:-25},{x:25,y:25},{x:-25,y:25}]}]});t.addScript(n)}function v(c,o,e){const t=new f;t.pos.set(o,e),t.beginPath(),t.moveTo(-100,0),t.lineTo(100,50),t.lineTo(200,40),t.stroke({color:"#ffffff",width:3}),c.addChild(t);const n=new r({rigidType:"static",shapes:[{shapeType:"chain",vertices:[{x:-100,y:0},{x:100,y:50},{x:200,y:40}]}]});t.addScript(n)}function p(c,o,e,t,n){const s=new g;s.pos.set(e,t),s.text=o,s.fontSize=20,s.on("click",i=>{i.stopPropagation(),n()}),c.addChild(s)}B();
